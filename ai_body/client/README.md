# 实时图像描述系统 - 客户端

这是实时图像描述系统的客户端部分，可以部署在树莓派上。

## 功能特点

- 美观的用户界面
- 支持配置服务器地址
- WebSocket 实时通信
- 自动重连机制
- 显示连接状态
- 支持多客户端连接
- 图片压缩和优化

## 系统要求

- Python 3.8+
- 树莓派 4B 或更高版本
- USB 摄像头

## 在树莓派上部署

1. 安装依赖：
```bash
# 创建虚拟环境（推荐）
python -m venv venv
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt
```

2. 配置服务器地址：
   - 打开网页后，在设置框中输入服务端地址
   - 格式为：`ws://服务器IP:5000/ws`
   - 例如：`ws://192.168.1.100:5000/ws`

3. 启动客户端服务器：
```bash
python app.py
```

4. 访问客户端：
```
http://树莓派IP:8080
```

## 配置说明

- 客户端默认端口为 8080
- 可以在 `app.py` 中修改端口号
- 服务器地址可以在网页界面中动态修改
- 图片压缩参数可以在 `app.py` 中调整：
  ```python
  IMAGE_WIDTH = 640  # 压缩后的图片宽度
  IMAGE_QUALITY = 85  # JPEG压缩质量（0-100）
  ```

## 注意事项

- 确保树莓派和服务端在同一网络下
- 检查防火墙设置，确保端口可访问
- 如果连接失败，检查服务器地址是否正确
- 建议使用静态 IP 地址配置树莓派
- 确保摄像头已正确连接并可用

## 故障排除

1. 如果无法访问客户端：
   - 检查树莓派 IP 地址
   - 确认 8080 端口是否开放
   - 检查网络连接

2. 如果无法连接到服务器：
   - 确认服务器地址格式正确
   - 检查服务器是否运行
   - 确认网络连接正常

3. 如果连接频繁断开：
   - 检查网络稳定性
   - 确认服务器负载情况
   - 检查树莓派资源使用情况

4. 如果摄像头无法使用：
   - 检查摄像头连接
   - 确认摄像头权限设置
   - 尝试重新插拔摄像头
   - 检查系统日志中的错误信息

## 性能优化建议

1. 图片压缩：
   - 如果网络带宽有限，可以降低 `IMAGE_WIDTH` 到 480 或 320
   - 如果图片质量不够，可以提高 `IMAGE_QUALITY` 到 90 或 95

2. 系统优化：
   - 使用静态 IP 地址
   - 关闭不必要的服务
   - 定期清理临时文件
   - 监控系统资源使用情况

## 许可证

MIT License 